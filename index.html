<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="color-scheme" content="dark light">
    <meta name="description" content="Test browser codec support using canPlayType, MediaSource, and mediaCapabilities APIs. Check Dolby Vision, HEVC, AV1, DTS compatibility for Jellyfin, Plex, Emby.">
    <title>CodecProbe - Multi-API Codec Testing for Media Server Enthusiasts</title>

    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="icons/favicon.svg">
    <link rel="alternate icon" type="image/x-icon" sizes="48x48" href="icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.png">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="CodecProbe">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="CodecProbe - Multi-API Codec Testing">
    <meta property="og:description" content="Test browser codec support using three different APIs. Check Dolby Vision, HEVC, AV1, and DTS compatibility for your media server.">
    <meta property="og:url" content="https://codecprobe.dev">
    <meta property="og:site_name" content="CodecProbe">
    <meta property="og:image" content="https://codecprobe.dev/screenshots/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter/X falls back to OG tags for title/description/image -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://codecprobe.dev">

    <!-- Schema.org markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "CodecProbe",
      "url": "https://codecprobe.dev",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Windows, macOS, Linux, Android, iOS",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "softwareVersion": "3.2.0",
      "description": "Browser codec testing tool using canPlayType, MediaSource, and mediaCapabilities APIs",
      "screenshot": "https://codecprobe.dev/screenshots/og-image.png",
      "license": "https://www.gnu.org/licenses/agpl-3.0.html"
    }
    </script>

    <link rel="stylesheet" href="css/styles.css">

    <!-- Modulepreload: flatten the import chain so all modules download in parallel -->
    <link rel="modulepreload" href="js/main.js">
    <link rel="modulepreload" href="js/ui-renderer.js">
    <link rel="modulepreload" href="js/codec-database.js">
    <link rel="modulepreload" href="js/codec-tester.js">
    <link rel="modulepreload" href="js/device-detection.js">
    <link rel="modulepreload" href="js/drm-detection.js">
    <link rel="modulepreload" href="js/theme-manager.js">
    <link rel="modulepreload" href="js/url-state.js">

    <script defer src="js/vendor/ua-parser.min.js"></script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to results</a>

    <!-- iOS install hint (shown via JS for Safari users) -->
    <div id="ios-install-hint" class="ios-install-hint" hidden>
        <span>To install: tap <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg> then <strong>Add to Home Screen</strong></span>
        <button class="dismiss-btn" id="dismiss-ios-hint" aria-label="Dismiss">&times;</button>
    </div>

    <!-- Canvas Container -->
    <div class="canvas-container">

        <!-- Section 1: Device Information Header -->
        <header class="device-header" id="device-header">
            <div class="device-header-top">
                <h1>CodecProbe</h1>
                <div class="header-actions">
                    <button id="install-btn" class="install-btn" hidden aria-label="Install CodecProbe app">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                        Install
                    </button>
                    <div class="theme-switcher" id="theme-switcher" role="toolbar" aria-label="Theme selector"></div>
                </div>
                <div class="subtitle">Multi-API codec testing for media server enthusiasts</div>
            </div>

            <div class="device-info-summary" id="device-info-summary">Loading device info...</div>
            <div class="api-availability" id="api-availability"></div>
            <div class="device-info-grid" id="device-info-grid"></div>
        </header>

        <!-- Section 2: Controls & Filters -->
        <div class="controls-section" role="toolbar" aria-label="Codec controls">
            <div class="search-container">
                <input type="search" id="search-input" class="search-input"
                       placeholder="Search codecs... (Press / to focus)"
                       aria-label="Search codecs">
            </div>

            <div class="filter-group" role="group" aria-label="Codec filters">
                <button class="filter-btn active" data-filter="all" aria-pressed="true">All</button>
                <button class="filter-btn" data-filter="supported" aria-pressed="false">Supported</button>
                <button class="filter-btn" data-filter="video" aria-pressed="false">Video</button>
                <button class="filter-btn" data-filter="audio" aria-pressed="false">Audio</button>
            </div>

            <div class="action-group" role="group" aria-label="Actions">
                <button class="action-btn" id="expand-toggle-btn" aria-label="Expand all codec cards" data-expanded="false">
                    <span class="btn-icon">⊕</span> <span class="btn-text">Expand All</span>
                </button>
                <button class="action-btn export-btn" id="export-btn" aria-label="Export results as JSON">
                    <span class="btn-icon">↓</span> Export JSON
                </button>
            </div>
        </div>

        <!-- Section 3: Results Grid (Main Content) -->
        <main id="main-content">
            <!-- Accessibility: Status announcements -->
            <div id="sr-announcements" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Detecting device capabilities...</p>
            </div>

            <div id="codec-grid" class="grid" style="display: none;"></div>
        </main>

        <!-- Section 4: Footer -->
        <footer class="site-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h2>About</h2>
                    <p>CodecProbe queries three browser APIs to show what your device actually decodes. 254 codec/container combinations across HEVC, Dolby Vision, AV1, VP9, DTS, Dolby Audio, and more.</p>
                    <p>Zero dependencies. No network requests. Runs entirely in your browser.</p>
                </div>

                <div class="footer-section">
                    <h2>Links</h2>
                    <ul class="footer-links">
                        <li><a href="https://github.com/nofear0411/codecprobe" target="_blank" rel="noopener">Source on GitHub</a></li>
                        <li><a href="https://github.com/nofear0411/codecprobe/issues" target="_blank" rel="noopener">Report a Bug</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h2>APIs</h2>
                    <ul class="footer-links">
                        <li>canPlayType() &mdash; basic format detection</li>
                        <li>isTypeSupported() &mdash; MSE/streaming support</li>
                        <li>decodingInfo() &mdash; hardware capability + performance</li>
                        <li>requestMediaKeySystemAccess() &mdash; DRM/EME (Widevine, PlayReady, FairPlay, ClearKey)</li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>CodecProbe <span id="app-version">v3.2.0</span> &mdash; AGPL-3.0 License</p>
            </div>
        </footer>

    </div> <!-- End canvas-container -->

    <script type="module" src="js/main.js"></script>
</body>
</html>
